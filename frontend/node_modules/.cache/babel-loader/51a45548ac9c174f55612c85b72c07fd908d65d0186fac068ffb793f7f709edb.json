{"ast":null,"code":"import React,{useState}from'react';import{Box,VStack,HStack,Text,SimpleGrid,Stat,StatLabel,StatNumber,StatHelpText,Table,Thead,Tbody,Tr,Th,Td,useColorModeValue,Heading,Flex,Image,Badge,Tag,Tabs,TabList,Tab,TabPanels,TabPanel,Icon}from'@chakra-ui/react';import{FiTrendingUp,FiCalendar,FiInfo,FiCheckCircle,FiFilter,FiAlertCircle}from'react-icons/fi';import Loader from'../common/Loader';// Define an interface for the H2H match that includes the result property\n// Update the H2HData interface to use our extended match type with explicit typing\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CustomHeadToHeadTab=_ref=>{var _match$homeTeam,_match$awayTeam,_match$homeTeam2,_match$awayTeam2,_match$homeTeam3,_match$awayTeam3;let{match,data,isLoading,initialMatchRange}=_ref;// Enhanced modern betting app color scheme with neumorphic styling\n// Add state for match range (5 or 10 matches)\nconst[matchRange,setMatchRange]=useState(initialMatchRange===5?5:10);const bgColor=useColorModeValue('gray.50','gray.900');const cardBg=useColorModeValue('white','gray.800');const statBg=useColorModeValue('white','gray.700');const tableBg=useColorModeValue('white','gray.800');const borderColor=useColorModeValue('gray.100','gray.700');const shadowColor=useColorModeValue('rgba(0, 0, 0, 0.06)','rgba(0, 0, 0, 0.3)');const accentBlue=useColorModeValue('blue.500','blue.300');const accentGreen=useColorModeValue('green.400','green.300');const accentOrange=useColorModeValue('orange.400','orange.300');const accentRed=useColorModeValue('red.500','red.300');const textColor=useColorModeValue('gray.700','gray.100');const headingColor=useColorModeValue('gray.800','white');const highlightColor=useColorModeValue('yellow.100','yellow.900');const softShadow=`0px 10px 25px ${shadowColor}, 0px 5px 15px ${shadowColor}`;const sharpShadow=`0px 4px 8px ${shadowColor}, 0px 1px 3px ${shadowColor}`;const innerShadow=`inset 0px 2px 4px ${shadowColor}`;const subtleGlow=`0 0 15px rgba(66, 153, 225, 0.4)`;const greenGlow=`0 0 12px rgba(72, 187, 120, 0.3)`;const redGlow=`0 0 12px rgba(245, 101, 101, 0.3)`;// Show loading state while data is being fetched\nif(isLoading||!data&&match!==null&&match!==void 0&&(_match$homeTeam=match.homeTeam)!==null&&_match$homeTeam!==void 0&&_match$homeTeam.id&&match!==null&&match!==void 0&&(_match$awayTeam=match.awayTeam)!==null&&_match$awayTeam!==void 0&&_match$awayTeam.id){return/*#__PURE__*/_jsx(Loader,{isOpen:true});}// Return a message if no data is available AND we have valid match data (meaning fetch completed)\nif(!data&&match!==null&&match!==void 0&&(_match$homeTeam2=match.homeTeam)!==null&&_match$homeTeam2!==void 0&&_match$homeTeam2.id&&match!==null&&match!==void 0&&(_match$awayTeam2=match.awayTeam)!==null&&_match$awayTeam2!==void 0&&_match$awayTeam2.id){return/*#__PURE__*/_jsx(Box,{p:4,bg:cardBg,borderRadius:\"xl\",boxShadow:softShadow,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"center\",py:8,children:[/*#__PURE__*/_jsx(Icon,{as:FiAlertCircle,boxSize:\"48px\",color:\"gray.400\"}),/*#__PURE__*/_jsx(Heading,{size:\"md\",children:\"No Head-to-Head Data Available\"}),/*#__PURE__*/_jsxs(Text,{align:\"center\",color:\"gray.500\",children:[\"No historical matches found between these teams.\",/*#__PURE__*/_jsx(\"br\",{}),\"This could be their first encounter or data may be limited.\"]})]})});}// If we don't have match data yet, show loading\nif(!(match!==null&&match!==void 0&&(_match$homeTeam3=match.homeTeam)!==null&&_match$homeTeam3!==void 0&&_match$homeTeam3.id)||!(match!==null&&match!==void 0&&(_match$awayTeam3=match.awayTeam)!==null&&_match$awayTeam3!==void 0&&_match$awayTeam3.id)){return/*#__PURE__*/_jsx(Loader,{isOpen:true});}// Enhanced logging for debugging logo issues\nconsole.log(\"🔍 [H2H Component] Data received:\",data);console.log(\"🔍 [H2H Component] Match prop:\",match);if(data){var _data$firstTeam,_data$firstTeam2,_data$secondTeam,_data$secondTeam2,_data$matches;console.log(\"🔍 [H2H Component] First team:\",(_data$firstTeam=data.firstTeam)===null||_data$firstTeam===void 0?void 0:_data$firstTeam.name,\"| Logo:\",(_data$firstTeam2=data.firstTeam)!==null&&_data$firstTeam2!==void 0&&_data$firstTeam2.logo?'✅':'❌');console.log(\"🔍 [H2H Component] Second team:\",(_data$secondTeam=data.secondTeam)===null||_data$secondTeam===void 0?void 0:_data$secondTeam.name,\"| Logo:\",(_data$secondTeam2=data.secondTeam)!==null&&_data$secondTeam2!==void 0&&_data$secondTeam2.logo?'✅':'❌');console.log(\"🔍 [H2H Component] Total matches:\",((_data$matches=data.matches)===null||_data$matches===void 0?void 0:_data$matches.length)||0);if(data.matches&&data.matches.length>0){var _firstMatch$homeTeam,_firstMatch$homeTeam2,_firstMatch$awayTeam,_firstMatch$awayTeam2,_firstMatch$homeTeam3,_firstMatch$awayTeam3;const firstMatch=data.matches[0];console.log(\"🔍 [H2H Component] First match home team:\",(_firstMatch$homeTeam=firstMatch.homeTeam)===null||_firstMatch$homeTeam===void 0?void 0:_firstMatch$homeTeam.name,\"| Logo:\",(_firstMatch$homeTeam2=firstMatch.homeTeam)!==null&&_firstMatch$homeTeam2!==void 0&&_firstMatch$homeTeam2.logo?'✅':'❌');console.log(\"🔍 [H2H Component] First match away team:\",(_firstMatch$awayTeam=firstMatch.awayTeam)===null||_firstMatch$awayTeam===void 0?void 0:_firstMatch$awayTeam.name,\"| Logo:\",(_firstMatch$awayTeam2=firstMatch.awayTeam)!==null&&_firstMatch$awayTeam2!==void 0&&_firstMatch$awayTeam2.logo?'✅':'❌');if((_firstMatch$homeTeam3=firstMatch.homeTeam)!==null&&_firstMatch$homeTeam3!==void 0&&_firstMatch$homeTeam3.logo){console.log(\"🔍 [H2H Component] First match home logo URL:\",firstMatch.homeTeam.logo);}if((_firstMatch$awayTeam3=firstMatch.awayTeam)!==null&&_firstMatch$awayTeam3!==void 0&&_firstMatch$awayTeam3.logo){console.log(\"🔍 [H2H Component] First match away logo URL:\",firstMatch.awayTeam.logo);}}console.log(\"🔍 [H2H Component] Summary data:\",data.summary);}else{console.log(\"❌ [H2H Component] No H2H data received\");}// Extract data from H2H data\nconst{summary,matches:allMatches}=data;const{firstTeam,secondTeam}=data;// Filter matches based on selected range (5 or 10)\n// Sort matches by date (newest first) to make sure we get the most recent ones\nconst sortedMatches=[...allMatches].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime());// Take only the number of matches specified by matchRange\nconst filteredMatches=sortedMatches.slice(0,matchRange);const matches=filteredMatches;// Calculate stats based on the filtered matches\nconst calculateMatchStats=matchesToAnalyze=>{// Calculate win/loss/draw stats\nconst stats={wins:{firstTeam:0,secondTeam:0,draws:0},goals:{firstTeam:0,secondTeam:0},totalMatches:matchesToAnalyze.length};matchesToAnalyze.forEach(match=>{// Cast match to our extended interface with the result field\nconst matchWithResult=match;// Calculate results\nif(!matchWithResult.result){// If no result field exists, calculate it based on score\nif(match.score.home===match.score.away){stats.wins.draws++;}else if(match.homeTeam.id===firstTeam.id&&match.score.home>match.score.away||match.awayTeam.id===firstTeam.id&&match.score.away>match.score.home){stats.wins.firstTeam++;}else{stats.wins.secondTeam++;}}else if(matchWithResult.result==='DRAW'){stats.wins.draws++;}else if(matchWithResult.result==='HOME'&&match.homeTeam.id===firstTeam.id||matchWithResult.result==='AWAY'&&match.awayTeam.id===firstTeam.id){stats.wins.firstTeam++;}else{stats.wins.secondTeam++;}// Calculate goals\nif(match.score){if(match.homeTeam.id===firstTeam.id){stats.goals.firstTeam+=parseInt(match.score.home.toString());stats.goals.secondTeam+=parseInt(match.score.away.toString());}else{stats.goals.firstTeam+=parseInt(match.score.away.toString());stats.goals.secondTeam+=parseInt(match.score.home.toString());}}});return stats;};// Calculate stats based on filtered matches\nconst currentStats=calculateMatchStats(matches);const totalMatches=currentStats.totalMatches;// Calculate percentages based on filtered data\nconst firstTeamWinPercentage=totalMatches>0?currentStats.wins.firstTeam/totalMatches*100:0;const secondTeamWinPercentage=totalMatches>0?currentStats.wins.secondTeam/totalMatches*100:0;const drawPercentage=totalMatches>0?currentStats.wins.draws/totalMatches*100:0;// Calculate average goals per match based on filtered data\nconst avgGoalsPerMatch=totalMatches>0?(currentStats.goals.firstTeam+currentStats.goals.secondTeam)/totalMatches:0;// Helper function to render team logo with proper fallback (similar to MatchHeader)\nconst renderTeamLogo=function(teamId,teamName){let size=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"24px\";// Determine which team logo to use based on team ID\nlet logoUrl='';console.log(`🔍 [H2H] renderTeamLogo called with ID: ${teamId}, Name: ${teamName}`);console.log(`🔍 [H2H] First team - ID: ${firstTeam===null||firstTeam===void 0?void 0:firstTeam.id}, Name: ${firstTeam===null||firstTeam===void 0?void 0:firstTeam.name}, Logo: ${firstTeam!==null&&firstTeam!==void 0&&firstTeam.logo?'✅':'❌'}`);console.log(`🔍 [H2H] Second team - ID: ${secondTeam===null||secondTeam===void 0?void 0:secondTeam.id}, Name: ${secondTeam===null||secondTeam===void 0?void 0:secondTeam.name}, Logo: ${secondTeam!==null&&secondTeam!==void 0&&secondTeam.logo?'✅':'❌'}`);// Try to match by team ID first\nif(teamId===(firstTeam===null||firstTeam===void 0?void 0:firstTeam.id)){logoUrl=firstTeam.logo;console.log(`🔍 [H2H] Matched first team by ID: ${logoUrl}`);}else if(teamId===(secondTeam===null||secondTeam===void 0?void 0:secondTeam.id)){logoUrl=secondTeam.logo;console.log(`🔍 [H2H] Matched second team by ID: ${logoUrl}`);}else{// Fallback: try to match by name\nif(teamName===(firstTeam===null||firstTeam===void 0?void 0:firstTeam.name)){logoUrl=firstTeam.logo;console.log(`🔍 [H2H] Matched first team by name: ${logoUrl}`);}else if(teamName===(secondTeam===null||secondTeam===void 0?void 0:secondTeam.name)){logoUrl=secondTeam.logo;console.log(`🔍 [H2H] Matched second team by name: ${logoUrl}`);}else{console.log(`🔍 [H2H] No match found for team: ${teamName} (${teamId})`);}}// If no logo found in H2H data, try to get from match prop as fallback\nif(!logoUrl&&match){var _match$homeTeam4,_match$homeTeam5,_match$awayTeam4,_match$awayTeam5;if(teamName===((_match$homeTeam4=match.homeTeam)===null||_match$homeTeam4===void 0?void 0:_match$homeTeam4.name)||teamId===((_match$homeTeam5=match.homeTeam)===null||_match$homeTeam5===void 0?void 0:_match$homeTeam5.id)){var _match$homeTeam6;logoUrl=(_match$homeTeam6=match.homeTeam)===null||_match$homeTeam6===void 0?void 0:_match$homeTeam6.logo;console.log(`🔍 [H2H] Using match home team logo as fallback: ${logoUrl}`);}else if(teamName===((_match$awayTeam4=match.awayTeam)===null||_match$awayTeam4===void 0?void 0:_match$awayTeam4.name)||teamId===((_match$awayTeam5=match.awayTeam)===null||_match$awayTeam5===void 0?void 0:_match$awayTeam5.id)){var _match$awayTeam6;logoUrl=(_match$awayTeam6=match.awayTeam)===null||_match$awayTeam6===void 0?void 0:_match$awayTeam6.logo;console.log(`🔍 [H2H] Using match away team logo as fallback: ${logoUrl}`);}}// Create fallback URL\nconst fallbackUrl=`https://ui-avatars.com/api/?name=${encodeURIComponent(teamName.substring(0,2))}&background=252535&color=6366F1&bold=true&size=128`;console.log(`🔍 [H2H] Final logo URL for ${teamName}: ${logoUrl||'using fallback'}`);return/*#__PURE__*/_jsx(Image,{src:logoUrl||fallbackUrl,alt:teamName,boxSize:size,borderRadius:\"full\",border:\"1px solid\",borderColor:borderColor,bg:\"white\",p:\"1px\",boxShadow:`0 1px 3px ${shadowColor}`,fallbackSrc:fallbackUrl,onLoad:()=>{console.log(`✅ [H2H] Team logo loaded successfully: ${teamName} - ${logoUrl||fallbackUrl}`);},onError:e=>{console.log(`❌ [H2H] Team logo load error for ${teamName}:`,e);console.log(`❌ [H2H] Attempted URL: ${logoUrl||'none'}`);console.log(`❌ [H2H] Fallback URL: ${fallbackUrl}`);}});};// Render the summary stats section with enhanced styling\nconst renderSummaryStats=()=>/*#__PURE__*/_jsxs(Box,{bg:statBg,p:5,borderRadius:\"xl\",boxShadow:softShadow,mb:6,transition:\"transform 0.2s\",_hover:{transform:'translateY(-2px)',boxShadow:`${softShadow}, ${subtleGlow}`},children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",mb:4,children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(FiTrendingUp,{size:\"20px\",color:accentGreen}),/*#__PURE__*/_jsx(Heading,{size:\"md\",ml:2,color:headingColor,fontWeight:\"600\",children:\"Head to Head Summary\"})]}),/*#__PURE__*/_jsxs(Badge,{colorScheme:\"blue\",py:1,px:2,borderRadius:\"md\",children:[\"Based on \",matchRange,\" matches\"]})]}),/*#__PURE__*/_jsxs(SimpleGrid,{columns:{base:1,md:3},spacing:6,children:[/*#__PURE__*/_jsx(Box,{borderRadius:\"lg\",bg:cardBg,p:4,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(Stat,{children:[/*#__PURE__*/_jsx(StatLabel,{fontSize:\"sm\",color:textColor,children:\"Total Matches\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"2xl\",fontWeight:\"bold\",color:accentBlue,children:totalMatches}),/*#__PURE__*/_jsx(StatHelpText,{fontSize:\"xs\",children:/*#__PURE__*/_jsx(Tag,{size:\"sm\",colorScheme:\"blue\",variant:\"subtle\",mt:1,children:\"All time record\"})})]})}),/*#__PURE__*/_jsx(Box,{borderRadius:\"lg\",bg:cardBg,p:4,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(Stat,{children:[/*#__PURE__*/_jsx(StatLabel,{fontSize:\"sm\",color:textColor,children:\"Average Goals / Match\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"2xl\",fontWeight:\"bold\",color:accentGreen,children:avgGoalsPerMatch.toFixed(1)}),/*#__PURE__*/_jsx(StatHelpText,{fontSize:\"xs\",children:/*#__PURE__*/_jsxs(HStack,{spacing:1,children:[/*#__PURE__*/_jsx(Box,{w:\"6px\",h:\"6px\",borderRadius:\"full\",bg:\"green.400\"}),/*#__PURE__*/_jsx(Text,{children:\"High scoring matchup\"})]})})]})}),/*#__PURE__*/_jsx(Box,{borderRadius:\"lg\",bg:cardBg,p:4,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(Stat,{children:[/*#__PURE__*/_jsx(StatLabel,{fontSize:\"sm\",color:textColor,children:\"Most Recent Match\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"xl\",fontWeight:\"bold\",color:headingColor,children:matches&&matches.length>0?new Date(matches[0].date).toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'}):'N/A'}),/*#__PURE__*/_jsx(StatHelpText,{fontSize:\"xs\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(FiCalendar,{size:\"12px\"}),/*#__PURE__*/_jsx(Text,{ml:1,children:\"Last encounter\"})]})})]})})]})]});// Render the win percentage bar with enhanced styling\nconst renderWinBar=()=>{// Use the already calculated stats for the filtered matches\nconst firstTeamWins=currentStats.wins.firstTeam;const secondTeamWins=currentStats.wins.secondTeam;const drawsCount=currentStats.wins.draws;// Percentages are already calculated at the top level based on filtered matches\nconst recalcFirstTeamWinPercentage=firstTeamWinPercentage;const recalcSecondTeamWinPercentage=secondTeamWinPercentage;const recalcDrawPercentage=drawPercentage;return/*#__PURE__*/_jsxs(Box,{bg:statBg,p:5,borderRadius:\"xl\",boxShadow:softShadow,mb:6,transition:\"transform 0.2s\",_hover:{transform:'translateY(-2px)'},children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:4,children:[/*#__PURE__*/_jsx(FiCheckCircle,{size:\"20px\",color:accentGreen}),/*#__PURE__*/_jsx(Heading,{size:\"sm\",ml:2,color:headingColor,fontWeight:\"600\",children:\"Head to Head Record\"})]}),/*#__PURE__*/_jsx(Box,{p:4,borderRadius:\"lg\",bg:cardBg,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,mb:4,children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",mb:4,children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsxs(Box,{position:\"relative\",boxSize:\"40px\",children:[renderTeamLogo(firstTeam.id,firstTeam.name,\"40px\"),/*#__PURE__*/_jsx(Badge,{position:\"absolute\",bottom:\"-2px\",right:\"-2px\",bg:\"blue.500\",color:\"white\",borderRadius:\"full\",boxSize:\"20px\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:firstTeamWins})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:headingColor,children:firstTeam.name}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",color:textColor,children:[\"Win rate: \",recalcFirstTeamWinPercentage.toFixed(0),\"%\"]})]})]}),/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",px:4,py:2,borderRadius:\"md\",bg:\"gray.100\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",fontWeight:\"medium\",color:\"gray.600\",children:\"Draws\"}),/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"lg\",color:\"gray.600\",children:drawsCount}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",color:\"gray.500\",children:[recalcDrawPercentage.toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsxs(Box,{textAlign:\"right\",children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:headingColor,children:secondTeam.name}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",color:textColor,children:[\"Win rate: \",recalcSecondTeamWinPercentage.toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(Box,{position:\"relative\",boxSize:\"40px\",children:[renderTeamLogo(secondTeam.id,secondTeam.name,\"40px\"),/*#__PURE__*/_jsx(Badge,{position:\"absolute\",bottom:\"-2px\",right:\"-2px\",bg:\"red.500\",color:\"white\",borderRadius:\"full\",boxSize:\"20px\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",children:secondTeamWins})]})]})]})}),/*#__PURE__*/_jsxs(Box,{position:\"relative\",pt:2,px:2,children:[/*#__PURE__*/_jsx(Box,{position:\"relative\",h:\"24px\",w:\"100%\",borderRadius:\"full\",overflow:\"hidden\",boxShadow:innerShadow,children:/*#__PURE__*/_jsxs(Flex,{h:\"100%\",children:[/*#__PURE__*/_jsx(Box,{bg:\"blue.500\",h:\"100%\",w:`${recalcFirstTeamWinPercentage}%`,transition:\"width 0.5s\",_hover:{boxShadow:subtleGlow}}),/*#__PURE__*/_jsx(Box,{bg:\"gray.300\",h:\"100%\",w:`${recalcDrawPercentage}%`,transition:\"width 0.5s\"}),/*#__PURE__*/_jsx(Box,{bg:\"red.500\",h:\"100%\",w:`${recalcSecondTeamWinPercentage}%`,transition:\"width 0.5s\",_hover:{boxShadow:redGlow}})]})}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",mt:2,children:[/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:\"blue.500\",children:[recalcFirstTeamWinPercentage.toFixed(0),\"%\"]}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:\"gray.600\",children:[recalcDrawPercentage.toFixed(0),\"%\"]}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:\"red.500\",children:[recalcSecondTeamWinPercentage.toFixed(0),\"%\"]})]})]})]});};// Render goal stats with enhanced styling\nconst renderGoalStats=()=>{// Always recalculate goal stats directly from the match data to ensure consistency\nconst calculatedGoals={firstTeam:0,secondTeam:0};matches.forEach(match=>{if(!match.score){console.warn('Match missing score data:',match.id);return;}if(match.homeTeam.id===firstTeam.id){calculatedGoals.firstTeam+=parseInt(match.score.home.toString());calculatedGoals.secondTeam+=parseInt(match.score.away.toString());}else{calculatedGoals.firstTeam+=parseInt(match.score.away.toString());calculatedGoals.secondTeam+=parseInt(match.score.home.toString());}});console.log(\"Calculated goals from matches:\",calculatedGoals);console.log(\"Goals from summary:\",summary.goals);// Always use recalculated values from actual match data for consistency\nconst firstTeamGoals=calculatedGoals.firstTeam;const secondTeamGoals=calculatedGoals.secondTeam;const totalGoals=firstTeamGoals+secondTeamGoals;return/*#__PURE__*/_jsxs(Box,{bg:statBg,p:5,borderRadius:\"xl\",boxShadow:softShadow,mb:6,transition:\"transform 0.2s\",_hover:{transform:'translateY(-2px)'},children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:4,children:[/*#__PURE__*/_jsx(FiInfo,{size:\"20px\",color:accentBlue}),/*#__PURE__*/_jsx(Heading,{size:\"sm\",ml:2,color:headingColor,fontWeight:\"600\",children:\"Goal Statistics\"})]}),/*#__PURE__*/_jsxs(SimpleGrid,{columns:{base:1,md:2},spacing:6,children:[/*#__PURE__*/_jsxs(Box,{p:4,borderRadius:\"lg\",bg:cardBg,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,position:\"relative\",overflow:\"hidden\",transition:\"transform 0.2s, box-shadow 0.3s\",_hover:{transform:'translateY(-2px)',boxShadow:`${sharpShadow}, ${subtleGlow}`},children:[/*#__PURE__*/_jsx(Box,{position:\"absolute\",top:0,right:0,w:\"8px\",h:\"8px\",borderRadius:\"0 0 0 8px\",bg:\"blue.500\"}),/*#__PURE__*/_jsxs(HStack,{mb:2,children:[renderTeamLogo(firstTeam.id,firstTeam.name),/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:headingColor,children:firstTeam.name})]}),/*#__PURE__*/_jsxs(Flex,{align:\"baseline\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"3xl\",fontWeight:\"bold\",color:accentBlue,children:firstTeamGoals}),/*#__PURE__*/_jsx(Text,{ml:2,fontSize:\"md\",color:textColor,children:\"goals\"})]}),/*#__PURE__*/_jsxs(Box,{mt:3,pb:2,children:[/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",mb:1,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",color:textColor,children:\"Per Match\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:accentBlue,children:totalMatches>0?(firstTeamGoals/totalMatches).toFixed(1):'0'})]}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",color:textColor,children:\"Proportion\"}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:accentBlue,children:[totalGoals>0?(firstTeamGoals/totalGoals*100).toFixed(0):'0',\"%\"]})]})]})]}),/*#__PURE__*/_jsxs(Box,{p:4,borderRadius:\"lg\",bg:cardBg,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,position:\"relative\",overflow:\"hidden\",transition:\"transform 0.2s, box-shadow 0.3s\",_hover:{transform:'translateY(-2px)',boxShadow:`${sharpShadow}, ${redGlow}`},children:[/*#__PURE__*/_jsx(Box,{position:\"absolute\",top:0,right:0,w:\"8px\",h:\"8px\",borderRadius:\"0 0 0 8px\",bg:\"red.500\"}),/*#__PURE__*/_jsxs(HStack,{mb:2,children:[renderTeamLogo(secondTeam.id,secondTeam.name),/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:headingColor,children:secondTeam.name})]}),/*#__PURE__*/_jsxs(Flex,{align:\"baseline\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"3xl\",fontWeight:\"bold\",color:\"red.500\",children:secondTeamGoals}),/*#__PURE__*/_jsx(Text,{ml:2,fontSize:\"md\",color:textColor,children:\"goals\"})]}),/*#__PURE__*/_jsxs(Box,{mt:3,pb:2,children:[/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",mb:1,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",color:textColor,children:\"Per Match\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:\"red.500\",children:totalMatches>0?(secondTeamGoals/totalMatches).toFixed(1):'0'})]}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",color:textColor,children:\"Proportion\"}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",color:\"red.500\",children:[totalGoals>0?(secondTeamGoals/totalGoals*100).toFixed(0):'0',\"%\"]})]})]})]})]}),/*#__PURE__*/_jsxs(Box,{mt:4,p:4,borderRadius:\"lg\",bg:cardBg,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,transition:\"transform 0.2s\",_hover:{boxShadow:sharpShadow},children:[/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",fontWeight:\"medium\",color:textColor,mb:2,children:\"Goal Distribution\"}),/*#__PURE__*/_jsx(Box,{position:\"relative\",h:\"12px\",bg:\"gray.100\",borderRadius:\"full\",overflow:\"hidden\",children:/*#__PURE__*/_jsx(Box,{position:\"absolute\",left:\"0\",top:\"0\",h:\"100%\",bg:\"blue.500\",w:totalGoals>0?`${firstTeamGoals/totalGoals*100}%`:'0%',transition:\"width 0.5s\",_hover:{boxShadow:subtleGlow}})}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",mt:2,children:[/*#__PURE__*/_jsxs(HStack,{children:[/*#__PURE__*/_jsx(Box,{w:\"10px\",h:\"10px\",borderRadius:\"sm\",bg:\"blue.500\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",children:firstTeam.name})]}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",fontWeight:\"bold\",children:[totalGoals,\" total goals\"]}),/*#__PURE__*/_jsxs(HStack,{children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",children:secondTeam.name}),/*#__PURE__*/_jsx(Box,{w:\"10px\",h:\"10px\",borderRadius:\"sm\",bg:\"red.500\"})]})]})]})]});};// Render the recent matches table with enhanced styling\nconst renderRecentMatches=()=>/*#__PURE__*/_jsxs(Box,{bg:statBg,p:5,borderRadius:\"xl\",boxShadow:softShadow,overflow:\"hidden\",transition:\"transform 0.2s\",_hover:{transform:'translateY(-2px)'},children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:4,children:[/*#__PURE__*/_jsx(FiCalendar,{size:\"20px\",color:accentBlue}),/*#__PURE__*/_jsx(Heading,{size:\"sm\",ml:2,color:headingColor,fontWeight:\"600\",children:\"Recent Encounters\"})]}),/*#__PURE__*/_jsx(Box,{overflowX:\"auto\",borderRadius:\"lg\",bg:cardBg,boxShadow:innerShadow,border:\"1px solid\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(Table,{variant:\"simple\",size:\"sm\",bg:tableBg,children:[/*#__PURE__*/_jsx(Thead,{bg:useColorModeValue('gray.50','gray.700'),children:/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Th,{borderBottomColor:borderColor,color:textColor,children:\"Date\"}),/*#__PURE__*/_jsx(Th,{borderBottomColor:borderColor,color:textColor,children:\"Home\"}),/*#__PURE__*/_jsx(Th,{textAlign:\"center\",borderBottomColor:borderColor,color:textColor,children:\"Score\"}),/*#__PURE__*/_jsx(Th,{borderBottomColor:borderColor,color:textColor,children:\"Away\"}),/*#__PURE__*/_jsx(Th,{borderBottomColor:borderColor,color:textColor,children:\"Result\"})]})}),/*#__PURE__*/_jsx(Tbody,{children:matches.map((match,idx)=>{var _matchWithResult$home,_match$homeTeam7,_match$homeTeam8,_match$homeTeam9,_match$score,_match$score2,_match$awayTeam7,_match$awayTeam8,_match$awayTeam9;// Cast match to our extended interface with the result field - using a more memory-efficient approach\nconst matchWithResult=match;// Check if the home team's name matches first team's name\nconst isFirstTeamHome=((_matchWithResult$home=matchWithResult.homeTeam)===null||_matchWithResult$home===void 0?void 0:_matchWithResult$home.name)===firstTeam.name;// Get the match result - use a more direct approach to access the result property\nlet result;// TypeScript-friendly way to access the result without complex casting\nconst matchResult=matchWithResult.result;if(matchResult){result=matchResult;}else if(matchWithResult.score){if(matchWithResult.score.home>matchWithResult.score.away){result='HOME';}else if(matchWithResult.score.home<matchWithResult.score.away){result='AWAY';}else{result='DRAW';}}else{result='DRAW';// Default if there's no score\n}const isFirstTeamWin=result==='HOME'&&isFirstTeamHome||result==='AWAY'&&!isFirstTeamHome;const isSecondTeamWin=result==='HOME'&&!isFirstTeamHome||result==='AWAY'&&isFirstTeamHome;let resultText;let resultColor;let resultBg;let resultGlow;if(result==='DRAW'){resultText='Draw';resultColor='gray.600';resultBg='gray.100';resultGlow='';}else if(isFirstTeamWin){resultText=`${firstTeam.name} Win`;resultColor='blue.700';resultBg='blue.50';resultGlow=subtleGlow;}else{resultText=`${secondTeam.name} Win`;resultColor='red.700';resultBg='red.50';resultGlow=redGlow;}// Alternate row styling for better readability\nconst rowBg=idx%2===0?'transparent':useColorModeValue('gray.50','gray.750');return/*#__PURE__*/_jsxs(Tr,{bg:rowBg,_hover:{bg:useColorModeValue('blue.50','gray.700')},children:[/*#__PURE__*/_jsx(Td,{borderBottomColor:borderColor,py:3,children:/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",fontWeight:\"medium\",children:new Date(match.date).toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'})})}),/*#__PURE__*/_jsx(Td,{borderBottomColor:borderColor,py:3,fontWeight:isFirstTeamHome?'bold':'normal',children:/*#__PURE__*/_jsxs(HStack,{children:[renderTeamLogo(((_match$homeTeam7=match.homeTeam)===null||_match$homeTeam7===void 0?void 0:_match$homeTeam7.id)||'',((_match$homeTeam8=match.homeTeam)===null||_match$homeTeam8===void 0?void 0:_match$homeTeam8.name)||'Home Team'),/*#__PURE__*/_jsx(Text,{children:((_match$homeTeam9=match.homeTeam)===null||_match$homeTeam9===void 0?void 0:_match$homeTeam9.name)||'Home Team'})]})}),/*#__PURE__*/_jsx(Td,{borderBottomColor:borderColor,py:3,textAlign:\"center\",children:/*#__PURE__*/_jsxs(Box,{px:3,py:1.5,borderRadius:\"md\",bg:result==='DRAW'?'gray.100':isFirstTeamHome?isFirstTeamWin?'blue.50':'red.50':isFirstTeamWin?'blue.50':'red.50',display:\"inline-block\",fontWeight:\"bold\",fontSize:\"sm\",border:\"1px solid\",borderColor:result==='DRAW'?'gray.200':isFirstTeamWin?'blue.200':'red.200',boxShadow:`0 1px 2px ${shadowColor}`,transition:\"transform 0.2s, box-shadow 0.3s\",_hover:{transform:'scale(1.05)',boxShadow:result==='DRAW'?sharpShadow:`${sharpShadow}, ${resultGlow}`},children:[((_match$score=match.score)===null||_match$score===void 0?void 0:_match$score.home)||0,\" - \",((_match$score2=match.score)===null||_match$score2===void 0?void 0:_match$score2.away)||0]})}),/*#__PURE__*/_jsx(Td,{borderBottomColor:borderColor,py:3,fontWeight:!isFirstTeamHome?'bold':'normal',children:/*#__PURE__*/_jsxs(HStack,{children:[renderTeamLogo(((_match$awayTeam7=match.awayTeam)===null||_match$awayTeam7===void 0?void 0:_match$awayTeam7.id)||'',((_match$awayTeam8=match.awayTeam)===null||_match$awayTeam8===void 0?void 0:_match$awayTeam8.name)||'Away Team'),/*#__PURE__*/_jsx(Text,{children:((_match$awayTeam9=match.awayTeam)===null||_match$awayTeam9===void 0?void 0:_match$awayTeam9.name)||'Away Team'})]})}),/*#__PURE__*/_jsx(Td,{borderBottomColor:borderColor,py:3,children:/*#__PURE__*/_jsx(Badge,{px:2,py:1,borderRadius:\"md\",fontSize:\"xs\",fontWeight:\"medium\",color:resultColor,bg:resultBg,boxShadow:`0 1px 2px ${shadowColor}`,transition:\"transform 0.2s\",_hover:{transform:'scale(1.05)'},children:resultText})})]},idx);})})]})})]});// Render the match range selector\nconst renderMatchRangeSelector=()=>/*#__PURE__*/_jsxs(Box,{bg:statBg,p:4,borderRadius:\"xl\",boxShadow:softShadow,mb:6,transition:\"transform 0.2s\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:3,justify:\"space-between\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(FiFilter,{size:\"18px\",color:accentBlue}),/*#__PURE__*/_jsx(Heading,{size:\"sm\",ml:2,color:headingColor,fontWeight:\"600\",children:\"Match Analysis Range\"})]}),/*#__PURE__*/_jsxs(Badge,{colorScheme:\"blue\",fontSize:\"sm\",py:1,px:2,borderRadius:\"md\",children:[\"Analyzing: Last \",matchRange,\" matches\"]})]}),\"      \",/*#__PURE__*/_jsxs(Tabs,{variant:\"soft-rounded\",colorScheme:\"blue\",size:\"sm\",index:matchRange===5?0:1,onChange:index=>{const newRange=index===0?5:10;setMatchRange(newRange);// Trigger data refresh event - parent component can listen for this and refresh data\nconst customEvent=new CustomEvent('gameCountChange',{detail:{gameCount:newRange,requiresRefetch:true},bubbles:true});document.dispatchEvent(customEvent);console.log(`Dispatched gameCountChange event with count: ${newRange} requiring refetch`);},children:[/*#__PURE__*/_jsxs(TabList,{children:[/*#__PURE__*/_jsx(Tab,{fontWeight:\"medium\",_selected:{color:'white',bg:accentBlue,boxShadow:subtleGlow},px:6,children:\"Last 5 Matches\"}),/*#__PURE__*/_jsx(Tab,{fontWeight:\"medium\",_selected:{color:'white',bg:accentBlue,boxShadow:subtleGlow},px:6,children:\"Last 10 Matches\"})]}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{}),/*#__PURE__*/_jsx(TabPanel,{})]})]})]});return/*#__PURE__*/_jsx(Box,{p:5,bg:bgColor,borderRadius:\"xl\",borderWidth:\"1px\",borderColor:borderColor,boxShadow:`${softShadow}, 0 0 5px ${shadowColor}`,position:\"relative\",overflow:\"hidden\",_before:{content:'\"\"',position:'absolute',top:0,left:0,right:0,height:'5px',bg:'linear-gradient(to right, #4299E1, #48BB78)',borderTopLeftRadius:'xl',borderTopRightRadius:'xl'},children:/*#__PURE__*/_jsxs(VStack,{spacing:6,align:\"stretch\",children:[renderMatchRangeSelector(),renderSummaryStats(),renderWinBar(),renderGoalStats(),renderRecentMatches()]})});};export default CustomHeadToHeadTab;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}