{"ast":null,"code":"// LiveMatches.tsx - A component to display live or upcoming soccer matches\n// @ts-nocheck\nimport React,{useState,useEffect,useCallback}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{Box,Container,Heading,SimpleGrid,Flex,Button,Icon,Text,Tabs,TabList,TabPanels,Tab,TabPanel,VStack,HStack,Badge,useColorModeValue,Skeleton,Alert,AlertIcon,AlertTitle,AlertDescription,Stat,StatLabel,StatNumber,StatHelpText,Divider}from\"@chakra-ui/react\";import{FiRefreshCw,FiCalendar,FiTrendingUp,FiActivity}from\"react-icons/fi\";import{BsLightningFill}from\"react-icons/bs\";import{MdAnalytics,MdSportsSoccer}from\"react-icons/md\";import soccerApiService from\"../api/soccerApiService\";import MatchCard from\"../components/matches/MatchCard\";import Loader from\"../components/common/Loader\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LiveMatches=_ref=>{let{isUpcoming=false}=_ref;const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeTab,setActiveTab]=useState(0);const navigate=useNavigate();const location=useLocation();// Determine if this is upcoming based on the route path as well as prop\nconst isUpcomingPage=isUpcoming||location.pathname==='/upcoming';// Fetch matches based on mode (live or upcoming)\nconst fetchMatches=useCallback(async()=>{setLoading(true);try{let response;if(isUpcomingPage){response=await soccerApiService.getUpcomingMatches(48);// Get 48 hours of upcoming matches\n}else{response=await soccerApiService.getLiveMatches();}setMatches(response);setError(null);}catch(err){console.error(`Error fetching ${isUpcomingPage?'upcoming':'live'} matches:`,err);setError(`Failed to load ${isUpcomingPage?'upcoming':'live'} matches. Please try again.`);setMatches([]);}finally{setLoading(false);}},[isUpcomingPage]);// Memoize fetchMatches with isUpcomingPage dependency\n// Initial fetch on component mount and when isUpcomingPage changes\nuseEffect(()=>{// Reset active tab when switching between live and upcoming\nsetActiveTab(0);fetchMatches();// Set up auto-refresh interval - different times for live vs upcoming\nconst refreshInterval=setInterval(fetchMatches,isUpcomingPage?60000:30000// 60 seconds for upcoming, 30 seconds for live\n);return()=>clearInterval(refreshInterval);},[isUpcomingPage,fetchMatches,location.pathname]);// Added location.pathname to force re-render on route change\n// Group matches by league for organized display\nconst groupedMatches=(Array.isArray(matches)?matches:[]).reduce((acc,match)=>{var _match$league;const leagueName=((_match$league=match.league)===null||_match$league===void 0?void 0:_match$league.name)||\"Other Leagues\";if(!acc[leagueName]){acc[leagueName]=[];}acc[leagueName].push(match);return acc;},{});// Convert grouped matches to array for easier rendering\nconst leagueGroups=Object.keys(groupedMatches).map(league=>({name:league,matches:groupedMatches[league]}));// Handle refresh request\nconst handleRefresh=()=>{fetchMatches();};// Enhanced loading state with skeleton cards\nconst renderLoadingState=()=>/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:8,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:8,children:[/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:2,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"32px\",width:\"200px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"120px\"})]}),/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"40px\",width:\"100px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"40px\",width:\"80px\"})]})]}),/*#__PURE__*/_jsxs(HStack,{spacing:4,mb:6,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"32px\",width:\"100px\",borderRadius:\"lg\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"32px\",width:\"120px\",borderRadius:\"lg\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"32px\",width:\"140px\",borderRadius:\"lg\"})]}),/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:6,children:Array.from({length:6}).map((_,index)=>/*#__PURE__*/_jsxs(Box,{bg:useColorModeValue('white','gray.800'),borderRadius:\"xl\",p:5,borderWidth:\"1px\",borderColor:useColorModeValue('gray.200','gray.700'),children:[/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",align:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"120px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"60px\",borderRadius:\"md\"})]}),/*#__PURE__*/_jsxs(VStack,{spacing:3,children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Skeleton,{boxSize:\"32px\",borderRadius:\"md\"}),/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:1,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"100px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"12px\",width:\"40px\"})]})]}),/*#__PURE__*/_jsx(Skeleton,{height:\"24px\",width:\"40px\",borderRadius:\"lg\"})]}),/*#__PURE__*/_jsx(Skeleton,{height:\"1px\",width:\"full\"}),/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",w:\"full\",children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Skeleton,{boxSize:\"32px\",borderRadius:\"md\"}),/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:1,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"100px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"12px\",width:\"40px\"})]})]}),/*#__PURE__*/_jsx(Skeleton,{height:\"24px\",width:\"40px\",borderRadius:\"lg\"})]})]}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",align:\"center\",mt:4,pt:3,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"12px\",width:\"80px\"}),/*#__PURE__*/_jsx(Skeleton,{boxSize:\"16px\"})]})]},index))})]});if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{isOpen:loading,variant:\"ring\"}),renderLoadingState()]});}if(error){return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:8,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:8,children:[/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:2,children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Icon,{as:isUpcomingPage?FiCalendar:BsLightningFill,color:isUpcomingPage?\"upcoming.500\":\"live.500\",boxSize:6}),/*#__PURE__*/_jsx(Heading,{size:\"lg\",color:useColorModeValue('gray.800','gray.100'),children:isUpcomingPage?\"Upcoming Matches\":\"Live Matches\"})]}),/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:useColorModeValue('gray.600','gray.400'),children:isUpcomingPage?\"Discover upcoming football matches\":\"Follow live football action\"})]}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:isUpcomingPage?\"upcoming\":\"live\",onClick:handleRefresh,size:\"lg\",children:\"Retry\"})]}),/*#__PURE__*/_jsxs(Alert,{status:\"error\",variant:\"subtle\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\",height:\"200px\",borderRadius:\"xl\",children:[/*#__PURE__*/_jsx(AlertIcon,{boxSize:\"40px\",mr:0}),/*#__PURE__*/_jsx(AlertTitle,{mt:4,mb:1,fontSize:\"lg\",children:\"Unable to load matches\"}),/*#__PURE__*/_jsx(AlertDescription,{maxWidth:\"sm\",children:error})]})]});}if(matches.length===0){return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:8,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:8,children:[/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:2,children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Icon,{as:isUpcomingPage?FiCalendar:BsLightningFill,color:isUpcomingPage?\"upcoming.500\":\"live.500\",boxSize:6}),/*#__PURE__*/_jsx(Heading,{size:\"lg\",color:useColorModeValue('gray.800','gray.100'),children:isUpcomingPage?\"Upcoming Matches\":\"Live Matches\"})]}),/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:useColorModeValue('gray.600','gray.400'),children:isUpcomingPage?\"Discover upcoming football matches\":\"Follow live football action\"})]}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:isUpcomingPage?\"upcoming\":\"live\",onClick:handleRefresh,size:\"lg\",children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(VStack,{spacing:6,py:12,children:[/*#__PURE__*/_jsx(Icon,{as:MdSportsSoccer,boxSize:16,color:useColorModeValue('gray.300','gray.600')}),/*#__PURE__*/_jsxs(VStack,{spacing:2,children:[/*#__PURE__*/_jsx(Text,{fontSize:\"xl\",fontWeight:\"600\",color:useColorModeValue('gray.700','gray.300'),children:isUpcomingPage?\"No upcoming matches found\":\"No live matches at the moment\"}),/*#__PURE__*/_jsx(Text,{color:useColorModeValue('gray.500','gray.500'),textAlign:\"center\",maxW:\"md\",children:isUpcomingPage?\"Check back later for upcoming football matches or try refreshing the page.\":\"All matches have finished or haven't started yet. Check the upcoming matches tab.\"})]}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),variant:\"outline\",colorScheme:isUpcomingPage?\"upcoming\":\"live\",onClick:handleRefresh,children:\"Refresh Now\"})]})]});}return/*#__PURE__*/_jsx(Box,{minH:\"100vh\",bg:useColorModeValue('gray.50','#0f0f23'),bgGradient:useColorModeValue('linear(to-br, gray.50, gray.100)','linear(to-br, #0f0f23, #1a1a3a)'),children:/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:8,pb:12,children:[/*#__PURE__*/_jsxs(VStack,{spacing:6,mb:8,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",w:\"full\",children:[/*#__PURE__*/_jsx(VStack,{align:\"start\",spacing:2,children:/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Box,{p:3,borderRadius:\"xl\",bg:useColorModeValue(isUpcomingPage?'upcoming.50':'live.50',isUpcomingPage?'upcoming.900':'live.900'),border:\"1px solid\",borderColor:useColorModeValue(isUpcomingPage?'upcoming.200':'live.200',isUpcomingPage?'upcoming.700':'live.700'),children:/*#__PURE__*/_jsx(Icon,{as:isUpcomingPage?FiCalendar:BsLightningFill,color:isUpcomingPage?\"upcoming.500\":\"live.500\",boxSize:6})}),/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:0,children:[/*#__PURE__*/_jsx(Heading,{size:\"xl\",color:useColorModeValue('gray.800','gray.100'),fontWeight:\"700\",children:isUpcomingPage?\"Upcoming Matches\":\"Live Matches\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"md\",color:useColorModeValue('gray.600','gray.400'),children:isUpcomingPage?\"Discover upcoming football matches\":\"Follow live football action\"})]})]})}),/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:MdAnalytics}),colorScheme:\"brand\",variant:\"outline\",size:\"lg\",onClick:()=>navigate(\"/analytics\"),_hover:{transform:'translateY(-1px)',boxShadow:'lg'},children:\"Analytics\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:isUpcomingPage?\"upcoming\":\"live\",isLoading:loading,onClick:handleRefresh,size:\"lg\",_hover:{transform:'translateY(-1px)',boxShadow:'lg'},children:\"Refresh\"})]})]}),/*#__PURE__*/_jsxs(SimpleGrid,{columns:{base:1,md:3},spacing:6,w:\"full\",children:[/*#__PURE__*/_jsxs(Stat,{bg:useColorModeValue('white','gray.800'),p:6,borderRadius:\"xl\",border:\"1px solid\",borderColor:useColorModeValue('gray.200','gray.700'),boxShadow:useColorModeValue('0 4px 6px -1px rgba(0, 0, 0, 0.1)','0 4px 6px -1px rgba(0, 0, 0, 0.3)'),children:[/*#__PURE__*/_jsx(StatLabel,{color:useColorModeValue('gray.600','gray.400'),fontSize:\"sm\",fontWeight:\"600\",children:\"Total Matches\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"2xl\",fontWeight:\"800\",color:useColorModeValue('gray.800','gray.100'),children:matches.length}),/*#__PURE__*/_jsxs(StatHelpText,{color:useColorModeValue('gray.500','gray.500'),fontSize:\"xs\",children:[/*#__PURE__*/_jsx(Icon,{as:FiActivity,mr:1}),\"Available now\"]})]}),/*#__PURE__*/_jsxs(Stat,{bg:useColorModeValue('white','gray.800'),p:6,borderRadius:\"xl\",border:\"1px solid\",borderColor:useColorModeValue('gray.200','gray.700'),boxShadow:useColorModeValue('0 4px 6px -1px rgba(0, 0, 0, 0.1)','0 4px 6px -1px rgba(0, 0, 0, 0.3)'),children:[/*#__PURE__*/_jsx(StatLabel,{color:useColorModeValue('gray.600','gray.400'),fontSize:\"sm\",fontWeight:\"600\",children:\"Leagues\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"2xl\",fontWeight:\"800\",color:useColorModeValue('gray.800','gray.100'),children:leagueGroups.length}),/*#__PURE__*/_jsxs(StatHelpText,{color:useColorModeValue('gray.500','gray.500'),fontSize:\"xs\",children:[/*#__PURE__*/_jsx(Icon,{as:FiTrendingUp,mr:1}),\"Different competitions\"]})]}),/*#__PURE__*/_jsxs(Stat,{bg:useColorModeValue('white','gray.800'),p:6,borderRadius:\"xl\",border:\"1px solid\",borderColor:useColorModeValue('gray.200','gray.700'),boxShadow:useColorModeValue('0 4px 6px -1px rgba(0, 0, 0, 0.1)','0 4px 6px -1px rgba(0, 0, 0, 0.3)'),children:[/*#__PURE__*/_jsx(StatLabel,{color:useColorModeValue('gray.600','gray.400'),fontSize:\"sm\",fontWeight:\"600\",children:\"Status\"}),/*#__PURE__*/_jsx(StatNumber,{fontSize:\"2xl\",fontWeight:\"800\",color:isUpcomingPage?'upcoming.500':'live.500',children:isUpcomingPage?'Upcoming':'Live'}),/*#__PURE__*/_jsxs(StatHelpText,{color:useColorModeValue('gray.500','gray.500'),fontSize:\"xs\",children:[/*#__PURE__*/_jsx(Icon,{as:isUpcomingPage?FiCalendar:BsLightningFill,mr:1}),isUpcomingPage?'Scheduled matches':'Real-time updates']})]})]})]}),/*#__PURE__*/_jsx(Box,{bg:useColorModeValue('white','gray.800'),borderRadius:\"xl\",border:\"1px solid\",borderColor:useColorModeValue('gray.200','gray.700'),boxShadow:useColorModeValue('0 4px 6px -1px rgba(0, 0, 0, 0.1)','0 4px 6px -1px rgba(0, 0, 0, 0.3)'),overflow:\"hidden\",children:/*#__PURE__*/_jsxs(Tabs,{variant:\"soft-rounded\",colorScheme:isUpcomingPage?\"upcoming\":\"live\",index:activeTab,onChange:index=>setActiveTab(index),children:[/*#__PURE__*/_jsx(Box,{p:6,pb:0,children:/*#__PURE__*/_jsxs(TabList,{mb:6,overflowX:\"auto\",css:{scrollbarWidth:\"thin\"},gap:2,children:[/*#__PURE__*/_jsxs(Tab,{_selected:{bg:isUpcomingPage?\"upcoming.500\":\"live.500\",color:\"white\",fontWeight:\"600\",boxShadow:\"md\"},_hover:{bg:useColorModeValue('gray.100','gray.700'),transform:'translateY(-1px)'},borderRadius:\"lg\",px:6,py:3,fontWeight:\"500\",transition:\"all 0.2s\",children:[\"All Matches\",/*#__PURE__*/_jsx(Badge,{ml:2,variant:\"subtle\",colorScheme:isUpcomingPage?\"upcoming\":\"live\",borderRadius:\"full\",children:matches.length})]}),leagueGroups.map((league,idx)=>/*#__PURE__*/_jsxs(Tab,{_selected:{bg:isUpcomingPage?\"upcoming.500\":\"live.500\",color:\"white\",fontWeight:\"600\",boxShadow:\"md\"},_hover:{bg:useColorModeValue('gray.100','gray.700'),transform:'translateY(-1px)'},borderRadius:\"lg\",px:6,py:3,fontWeight:\"500\",transition:\"all 0.2s\",whiteSpace:\"nowrap\",children:[league.name,/*#__PURE__*/_jsx(Badge,{ml:2,variant:\"subtle\",colorScheme:isUpcomingPage?\"upcoming\":\"live\",borderRadius:\"full\",children:league.matches.length})]},idx))]})}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{p:6,pt:0,children:/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:6,children:matches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match,onClick:()=>navigate(`/match/${match.id}`)},match.id))})}),leagueGroups.map((league,idx)=>/*#__PURE__*/_jsx(TabPanel,{p:6,pt:0,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"stretch\",children:[/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Text,{fontSize:\"lg\",fontWeight:\"600\",color:useColorModeValue('gray.700','gray.300'),whiteSpace:\"nowrap\",children:league.name}),/*#__PURE__*/_jsx(Divider,{})]}),/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:6,children:league.matches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match,onClick:()=>navigate(`/match/${match.id}`)},match.id))})]})},idx))]})]})})]})});};export default LiveMatches;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}