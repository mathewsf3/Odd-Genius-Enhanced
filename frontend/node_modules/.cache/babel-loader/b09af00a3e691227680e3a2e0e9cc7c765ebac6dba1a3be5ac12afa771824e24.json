{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{Box,Container,Heading,Text,Flex,Button,Spinner,Divider,useColorModeValue,SimpleGrid,Stat,StatLabel,StatNumber,StatHelpText,Icon,Table,Thead,Tbody,Tr,Th,Td,Image}from'@chakra-ui/react';import{FiArrowLeft}from'react-icons/fi';import{BiFootball,BiTrophy}from'react-icons/bi';import{BsGraphUp}from'react-icons/bs';import soccerApiService from'../api/soccerApiService';import MatchCard from'../components/matches/MatchCard';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LeagueAnalysis=()=>{const{leagueName}=useParams();const navigate=useNavigate();const[logo,setLogo]=useState(null);const[liveMatches,setLiveMatches]=useState([]);const[upcomingMatches,setUpcomingMatches]=useState([]);const[liveLoading,setLiveLoading]=useState(true);const[upcomingLoading,setUpcomingLoading]=useState(true);// Theme colors\nconst bgColor=useColorModeValue('white','gray.800');const borderColor=useColorModeValue('gray.200','gray.700');const topBgColor=useColorModeValue('blue.50','blue.900');// Fetch match data\nuseEffect(()=>{const fetchData=async()=>{try{setLiveLoading(true);const liveData=await soccerApiService.getLiveMatches();setLiveMatches(liveData||[]);}catch(error){console.error('Error fetching live matches:',error);setLiveMatches([]);}finally{setLiveLoading(false);}try{setUpcomingLoading(true);const upcomingData=await soccerApiService.getUpcomingMatches();setUpcomingMatches(upcomingData||[]);}catch(error){console.error('Error fetching upcoming matches:',error);setUpcomingMatches([]);}finally{setUpcomingLoading(false);}};fetchData();},[]);// Filter matches for this league only\nconst leagueMatches=[...liveMatches,...upcomingMatches].filter(match=>match.league.name===leagueName);// Get league logo from the first match\nuseEffect(()=>{if(leagueMatches.length>0&&leagueMatches[0].league.logo){setLogo(leagueMatches[0].league.logo);}},[leagueMatches]);// Calculate league statistics\nconst liveLeagueMatches=liveMatches.filter(match=>match.league.name===leagueName);const upcomingLeagueMatches=upcomingMatches.filter(match=>match.league.name===leagueName);const totalMatches=liveLeagueMatches.length+upcomingLeagueMatches.length;const recommendedMatches=leagueMatches.filter(match=>match.recommended).length;// Mock team standings data (in a real app, this would come from an API)\nconst mockTeamStandings=Array(6).fill(0).map((_,i)=>({position:i+1,teamName:`Team ${i+1}`,played:10+Math.floor(Math.random()*5),won:5+Math.floor(Math.random()*5),drawn:Math.floor(Math.random()*5),lost:Math.floor(Math.random()*5),goalDifference:Math.floor(Math.random()*20)-5,points:15+Math.floor(Math.random()*30)})).sort((a,b)=>b.points-a.points);// Calculate recent form based on recommended picks\nconst recentForm=leagueMatches.filter(match=>match.recommended).length>0?'Strong':'Average';if(liveLoading||upcomingLoading){return/*#__PURE__*/_jsx(Container,{maxW:\"container.xl\",py:8,children:/*#__PURE__*/_jsxs(Flex,{justify:\"center\",align:\"center\",direction:\"column\",my:16,children:[/*#__PURE__*/_jsx(Spinner,{size:\"xl\",thickness:\"4px\",color:\"purple.500\",mb:4}),/*#__PURE__*/_jsx(Text,{children:\"Loading league data...\"})]})});}return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",py:8,children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",mb:8,children:[/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(FiArrowLeft,{}),variant:\"ghost\",onClick:()=>navigate(-1),mr:3,children:\"Back\"}),/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[logo&&/*#__PURE__*/_jsx(Image,{src:logo,boxSize:\"48px\",mr:4,fallbackSrc:\"https://via.placeholder.com/48\",borderRadius:\"full\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:decodeURIComponent(leagueName||'')}),/*#__PURE__*/_jsx(Text,{color:\"gray.500\",children:\"League Analysis Dashboard\"})]})]})]}),/*#__PURE__*/_jsxs(SimpleGrid,{columns:{base:1,md:3},spacing:6,mb:8,children:[/*#__PURE__*/_jsx(Stat,{p:4,bg:bgColor,borderRadius:\"lg\",boxShadow:\"md\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Box,{p:2,bg:\"blue.100\",borderRadius:\"md\",display:\"inline-block\",mr:3,children:/*#__PURE__*/_jsx(Icon,{as:BiFootball,color:\"blue.500\",boxSize:5})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(StatLabel,{children:\"Live & Upcoming\"}),/*#__PURE__*/_jsx(StatNumber,{children:totalMatches}),/*#__PURE__*/_jsx(StatHelpText,{children:\"Matches in this league\"})]})]})}),/*#__PURE__*/_jsx(Stat,{p:4,bg:bgColor,borderRadius:\"lg\",boxShadow:\"md\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Box,{p:2,bg:\"purple.100\",borderRadius:\"md\",display:\"inline-block\",mr:3,children:/*#__PURE__*/_jsx(Icon,{as:BsGraphUp,color:\"purple.500\",boxSize:5})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(StatLabel,{children:\"Recommended\"}),/*#__PURE__*/_jsx(StatNumber,{children:recommendedMatches}),/*#__PURE__*/_jsx(StatHelpText,{children:\"Picks available\"})]})]})}),/*#__PURE__*/_jsx(Stat,{p:4,bg:bgColor,borderRadius:\"lg\",boxShadow:\"md\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Box,{p:2,bg:\"green.100\",borderRadius:\"md\",display:\"inline-block\",mr:3,children:/*#__PURE__*/_jsx(Icon,{as:BiTrophy,color:\"green.500\",boxSize:5})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(StatLabel,{children:\"League Form\"}),/*#__PURE__*/_jsx(StatNumber,{children:recentForm}),/*#__PURE__*/_jsx(StatHelpText,{children:\"Recent performance\"})]})]})})]}),/*#__PURE__*/_jsxs(Box,{bg:bgColor,borderRadius:\"lg\",boxShadow:\"md\",mb:8,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Box,{p:4,borderBottom:\"1px\",borderColor:borderColor,children:/*#__PURE__*/_jsx(Heading,{size:\"md\",children:\"League Table\"})}),/*#__PURE__*/_jsxs(Table,{variant:\"simple\",children:[/*#__PURE__*/_jsx(Thead,{children:/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Th,{children:\"#\"}),/*#__PURE__*/_jsx(Th,{children:\"Team\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"P\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"W\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"D\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"L\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"GD\"}),/*#__PURE__*/_jsx(Th,{isNumeric:true,children:\"Pts\"})]})}),\"          \",/*#__PURE__*/_jsx(Tbody,{children:(()=>{// Using topBgColor from component scope\nreturn mockTeamStandings.map((team,index)=>{// Use the color mode value directly from outside the callback\nconst bgColor=index<4?topBgColor:undefined;return/*#__PURE__*/_jsxs(Tr,{bg:bgColor,children:[/*#__PURE__*/_jsx(Td,{children:team.position}),/*#__PURE__*/_jsx(Td,{children:team.teamName}),/*#__PURE__*/_jsx(Td,{isNumeric:true,children:team.played}),/*#__PURE__*/_jsx(Td,{isNumeric:true,children:team.won}),/*#__PURE__*/_jsx(Td,{isNumeric:true,children:team.drawn}),/*#__PURE__*/_jsx(Td,{isNumeric:true,children:team.lost}),/*#__PURE__*/_jsx(Td,{isNumeric:true,children:team.goalDifference>0?`+${team.goalDifference}`:team.goalDifference}),/*#__PURE__*/_jsx(Td,{isNumeric:true,fontWeight:\"bold\",children:team.points})]},index);});})()})]})]}),/*#__PURE__*/_jsxs(Box,{mb:8,children:[/*#__PURE__*/_jsx(Heading,{size:\"md\",mb:4,children:\"League Matches\"}),liveLeagueMatches.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{mb:4,children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",color:\"red.500\",mb:2,children:\"Live Matches\"}),/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:4,children:liveLeagueMatches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:{...match,status:'LIVE',elapsed:match.elapsed||'45'},onClick:()=>navigate(`/match/${match.id}`),useModernDesign:false},match.id))})]}),/*#__PURE__*/_jsx(Divider,{my:6})]}),upcomingLeagueMatches.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",color:\"blue.500\",mb:2,children:\"Upcoming Matches\"}),/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:4,children:upcomingLeagueMatches.slice(0,6).map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match,onClick:()=>navigate(`/match/${match.id}`),useModernDesign:false},match.id))})]})}),liveLeagueMatches.length===0&&upcomingLeagueMatches.length===0&&/*#__PURE__*/_jsx(Flex,{justify:\"center\",p:8,bg:\"gray.50\",borderRadius:\"md\",children:/*#__PURE__*/_jsx(Text,{children:\"No matches are currently available for this league\"})})]})]});};export default LeagueAnalysis;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}