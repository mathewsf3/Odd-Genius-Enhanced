{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Box,Flex,Text,Input,Button,VStack,HStack,IconButton,Heading,useColorModeValue}from'@chakra-ui/react';import{CloseIcon}from'@chakra-ui/icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AIChatPanel=_ref=>{let{onClose}=_ref;const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isTeamWorking,setIsTeamWorking]=useState(false);const messagesEndRef=useRef(null);const bgColor=useColorModeValue('gray.50','gray.900');const borderColor=useColorModeValue('gray.200','gray.700');useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);const sendMessage=async()=>{if(!input.trim())return;const userMessage={type:'user',content:input,timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);setInput('');setIsTeamWorking(true);try{const response=await fetch('http://localhost:3001/api/ai-team/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:input,projectContext:{}})});const data=await response.json();const assistantMessage={type:'assistant',content:data.message,timestamp:new Date()};setMessages(prev=>[...prev,assistantMessage]);if(data.findings){const findingsMessages=data.findings.map(f=>({type:'assistant',content:JSON.stringify(f,null,2),timestamp:new Date()}));setMessages(prev=>[...prev,...findingsMessages]);}}catch(error){const errorMessage={type:'system',content:`Error: ${error instanceof Error?error.message:'Unknown error'}`,timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}finally{setIsTeamWorking(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};return/*#__PURE__*/_jsxs(Flex,{direction:\"column\",h:\"100%\",bg:bgColor,children:[/*#__PURE__*/_jsxs(Flex,{p:4,borderBottom:\"1px\",borderColor:borderColor,justify:\"space-between\",align:\"center\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Heading,{size:\"md\",color:\"white\",children:\"\\uD83E\\uDD16 AI Team Assistant\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:\"gray.400\",mt:1,children:\"2-3 AI specialists with codebase access\"})]}),onClose&&/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Close AI Chat\",icon:/*#__PURE__*/_jsx(CloseIcon,{}),size:\"sm\",variant:\"ghost\",color:\"white\",onClick:onClose})]}),/*#__PURE__*/_jsx(Box,{flex:1,overflowY:\"auto\",p:4,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"stretch\",children:[messages.length===0&&/*#__PURE__*/_jsx(Box,{p:4,bg:\"gray.800\",borderRadius:\"md\",children:/*#__PURE__*/_jsx(Text,{color:\"gray.300\",textAlign:\"center\",children:\"\\uD83D\\uDC4B Hello! I'm your AI team assistant. Ask me anything about your codebase, and I'll coordinate with our 2-3 AI specialists to help you debug, analyze, or implement features.\"})}),messages.map((msg,i)=>/*#__PURE__*/_jsx(Flex,{justify:msg.type==='user'?'flex-end':'flex-start',children:/*#__PURE__*/_jsxs(Box,{maxW:\"80%\",bg:msg.type==='user'?'blue.600':'gray.700',color:\"white\",p:3,borderRadius:\"lg\",borderTopRightRadius:msg.type==='user'?'sm':'lg',borderTopLeftRadius:msg.type==='user'?'lg':'sm',children:[/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",whiteSpace:\"pre-wrap\",children:msg.content}),/*#__PURE__*/_jsx(Text,{fontSize:\"xs\",color:\"gray.300\",mt:2,children:msg.timestamp.toLocaleTimeString()})]})},i)),isTeamWorking&&/*#__PURE__*/_jsx(Flex,{justify:\"flex-start\",children:/*#__PURE__*/_jsx(Box,{bg:\"gray.700\",p:3,borderRadius:\"lg\",borderTopLeftRadius:\"sm\",children:/*#__PURE__*/_jsx(Text,{color:\"white\",fontSize:\"sm\",children:\"\\uD83E\\uDD16 AI team is working...\"})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(Box,{p:4,borderTop:\"1px\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(HStack,{spacing:2,children:[/*#__PURE__*/_jsx(Input,{value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyPress,placeholder:\"Ask the AI team anything...\",bg:\"gray.800\",color:\"white\",border:\"none\",_focus:{ring:2,ringColor:'blue.500'},disabled:isTeamWorking}),/*#__PURE__*/_jsx(Button,{onClick:sendMessage,isDisabled:isTeamWorking||!input.trim(),colorScheme:\"blue\",isLoading:isTeamWorking,loadingText:\"...\",children:\"Send\"})]})})]});};export default AIChatPanel;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}