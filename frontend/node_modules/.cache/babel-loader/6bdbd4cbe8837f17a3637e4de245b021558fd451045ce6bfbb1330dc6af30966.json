{"ast":null,"code":"// LiveMatches.tsx - A component to display live or upcoming soccer matches\nimport React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{Box,Container,Heading,SimpleGrid,Flex,Button,Icon,Text,Tabs,TabList,TabPanels,Tab,TabPanel// Image and Divider removed as they're unused\n}from\"@chakra-ui/react\";import{FiRefreshCw,FiCalendar}from\"react-icons/fi\";import{BsLightningFill}from\"react-icons/bs\";import{MdAnalytics}from\"react-icons/md\";import soccerApiService from\"../api/soccerApiService\";import MatchCard from\"../components/matches/MatchCard\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LiveMatches=_ref=>{let{isUpcoming=false}=_ref;const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeTab,setActiveTab]=useState(0);const navigate=useNavigate();// Fetch matches based on mode (live or upcoming)\nconst fetchMatches=async()=>{setLoading(true);try{let response;if(isUpcoming){response=await soccerApiService.getUpcomingMatches(48);// Get 48 hours of upcoming matches\n}else{response=await soccerApiService.getLiveMatches();}setMatches(response);setError(null);}catch(err){console.error(`Error fetching ${isUpcoming?'upcoming':'live'} matches:`,err);setError(`Failed to load ${isUpcoming?'upcoming':'live'} matches. Please try again.`);setMatches([]);}finally{setLoading(false);}};// Initial fetch on component mount\nuseEffect(()=>{fetchMatches();// Set up auto-refresh interval - different times for live vs upcoming\nconst refreshInterval=setInterval(fetchMatches,isUpcoming?60000:30000// 60 seconds for upcoming, 30 seconds for live\n);return()=>clearInterval(refreshInterval);},[]);// Group matches by league for organized display\nconst groupedMatches=(Array.isArray(matches)?matches:[]).reduce((acc,match)=>{var _match$league;const leagueName=((_match$league=match.league)===null||_match$league===void 0?void 0:_match$league.name)||\"Other Leagues\";if(!acc[leagueName]){acc[leagueName]=[];}acc[leagueName].push(match);return acc;},{});// Convert grouped matches to array for easier rendering\nconst leagueGroups=Object.keys(groupedMatches).map(league=>({name:league,matches:groupedMatches[league]}));// Handle refresh request\nconst handleRefresh=()=>{fetchMatches();};if(loading){return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:5,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:isUpcoming?\"Upcoming Matches\":\"Live Matches\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:\"blue\",isLoading:loading,onClick:handleRefresh,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(Text,{color:\"gray.500\",textAlign:\"center\",children:\"Loading matches...\"})]});}if(error){return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:5,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:isUpcoming?\"Upcoming Matches\":\"Live Matches\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:\"blue\",onClick:handleRefresh,children:\"Retry\"})]}),/*#__PURE__*/_jsx(Box,{p:4,borderRadius:\"md\",bg:\"red.50\",color:\"red.600\",children:/*#__PURE__*/_jsx(Text,{fontWeight:\"medium\",children:error})})]});}if(matches.length===0){return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:5,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:isUpcoming?\"Upcoming Matches\":\"Live Matches\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:\"blue\",onClick:handleRefresh,children:\"Refresh\"})]}),/*#__PURE__*/_jsx(Text,{color:\"gray.500\",textAlign:\"center\",children:isUpcoming?\"No upcoming matches found\":\"No live matches at the moment\"})]});}return/*#__PURE__*/_jsxs(Container,{maxW:\"container.xl\",pt:5,children:[/*#__PURE__*/_jsxs(Flex,{justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Icon,{as:isUpcoming?FiCalendar:BsLightningFill,color:isUpcoming?\"teal.500\":\"red.500\",mr:2}),/*#__PURE__*/_jsx(Heading,{size:\"lg\",children:isUpcoming?\"Upcoming Matches\":\"Live Matches\"})]}),/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:MdAnalytics}),colorScheme:\"teal\",variant:\"outline\",mr:2,onClick:()=>navigate(\"/analytics\"),children:\"Analytics\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(Icon,{as:FiRefreshCw}),colorScheme:\"blue\",isLoading:loading,onClick:handleRefresh,children:\"Refresh\"})]})]}),/*#__PURE__*/_jsxs(Tabs,{variant:\"soft-rounded\",colorScheme:\"blue\",mb:4,index:activeTab,onChange:index=>setActiveTab(index),children:[/*#__PURE__*/_jsxs(TabList,{mb:4,overflowX:\"auto\",css:{scrollbarWidth:\"thin\"},children:[/*#__PURE__*/_jsx(Tab,{_selected:{bg:\"blue.50\",fontWeight:\"semibold\"},_hover:{bg:\"gray.50\"},borderRadius:\"md\",mr:2,children:\"All Matches\"}),leagueGroups.map((league,idx)=>/*#__PURE__*/_jsx(Tab,{_selected:{bg:\"blue.50\",fontWeight:\"semibold\"},_hover:{bg:\"gray.50\"},borderRadius:\"md\",mr:2,children:league.name},idx))]}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{p:0,children:/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:4,children:matches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match,onClick:()=>navigate(`/match/${match.id}`)},match.id))})}),leagueGroups.map((league,idx)=>/*#__PURE__*/_jsx(TabPanel,{p:0,children:/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:4,children:league.matches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match,onClick:()=>navigate(`/match/${match.id}`)},match.id))})},idx))]})]})]});};export default LiveMatches;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}