{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{Box,Flex,Text,Heading,Input,InputGroup,InputLeftElement,Select,Button,ButtonGroup,Badge,Image,Center,VStack,HStack,Icon,useColorModeValue,Switch,FormControl,FormLabel,Container,SimpleGrid,Skeleton}from'@chakra-ui/react';import{FiSearch,FiGrid,FiList,FiRefreshCw,FiPlay,FiClock,FiCheckCircle,FiGlobe}from'react-icons/fi';import{fetchEnhancedLeagues}from'../../services/leaguesService';// Props interface\n// League card component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeagueCard=_ref=>{let{league,onClick,view}=_ref;// Theme colors\nconst cardBg=useColorModeValue('white','gray.800');const borderColor=useColorModeValue('gray.200','gray.700');const textColor=useColorModeValue('gray.800','white');const mutedColor=useColorModeValue('gray.600','gray.400');const hoverBg=useColorModeValue('gray.50','gray.700');const liveBadgeBg=useColorModeValue('red.500','red.600');const upcomingBadgeBg=useColorModeValue('blue.500','blue.600');// Status badge configuration\nconst getStatusBadge=()=>{switch(league.status){case'live':return/*#__PURE__*/_jsxs(Badge,{colorScheme:\"red\",variant:\"solid\",fontSize:\"xs\",px:2,py:1,children:[/*#__PURE__*/_jsx(Icon,{as:FiPlay,mr:1,boxSize:3}),\"LIVE\"]});case'upcoming':return/*#__PURE__*/_jsxs(Badge,{colorScheme:\"blue\",variant:\"solid\",fontSize:\"xs\",px:2,py:1,children:[/*#__PURE__*/_jsx(Icon,{as:FiClock,mr:1,boxSize:3}),\"UPCOMING\"]});case'finished':return/*#__PURE__*/_jsxs(Badge,{colorScheme:\"gray\",variant:\"solid\",fontSize:\"xs\",px:2,py:1,children:[/*#__PURE__*/_jsx(Icon,{as:FiCheckCircle,mr:1,boxSize:3}),\"FINISHED\"]});default:return null;}};// Logo component with fallback\nconst LeagueLogo=_ref2=>{let{logo,size=\"48px\"}=_ref2;return/*#__PURE__*/_jsx(Image,{src:logo.url,alt:league.name,boxSize:size,objectFit:\"contain\",fallbackSrc:logo.fallbackUrl,borderRadius:\"md\",border:\"1px solid\",borderColor:borderColor,p:1,backgroundColor:\"white\",onError:e=>{console.log(`[LeagueLogo] Error loading logo for ${league.name}, using fallback`);}});};if(view==='list'){return/*#__PURE__*/_jsx(Box,{p:4,bg:cardBg,borderRadius:\"md\",border:\"1px solid\",borderColor:borderColor,cursor:\"pointer\",onClick:()=>onClick===null||onClick===void 0?void 0:onClick(league),_hover:{bg:hoverBg,transform:'translateY(-1px)'},transition:\"all 0.2s\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",justify:\"space-between\",children:[/*#__PURE__*/_jsxs(Flex,{align:\"center\",flex:\"1\",children:[/*#__PURE__*/_jsx(LeagueLogo,{logo:league.logo,size:\"40px\"}),/*#__PURE__*/_jsxs(Box,{ml:3,flex:\"1\",children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:textColor,children:league.name}),/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",color:mutedColor,children:[league.country,\" \\u2022 Season \",league.season]})]})]}),/*#__PURE__*/_jsxs(HStack,{spacing:3,children:[league.liveMatches&&league.liveMatches>0&&/*#__PURE__*/_jsxs(Badge,{colorScheme:\"red\",variant:\"outline\",children:[league.liveMatches,\" live\"]}),league.upcomingMatches&&league.upcomingMatches>0&&/*#__PURE__*/_jsxs(Badge,{colorScheme:\"blue\",variant:\"outline\",children:[league.upcomingMatches,\" upcoming\"]}),getStatusBadge()]})]})});}// Grid view\nreturn/*#__PURE__*/_jsxs(Box,{p:5,bg:cardBg,borderRadius:\"lg\",border:\"1px solid\",borderColor:borderColor,cursor:\"pointer\",onClick:()=>onClick===null||onClick===void 0?void 0:onClick(league),_hover:{bg:hoverBg,transform:'translateY(-2px)',boxShadow:'lg'},transition:\"all 0.2s\",position:\"relative\",minH:\"200px\",children:[/*#__PURE__*/_jsx(Box,{position:\"absolute\",top:3,right:3,children:getStatusBadge()}),/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"center\",h:\"full\",children:[/*#__PURE__*/_jsx(LeagueLogo,{logo:league.logo,size:\"64px\"}),/*#__PURE__*/_jsxs(VStack,{spacing:1,textAlign:\"center\",flex:\"1\",children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",fontSize:\"md\",color:textColor,noOfLines:2,children:league.name}),/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:mutedColor,children:league.country}),/*#__PURE__*/_jsxs(Text,{fontSize:\"xs\",color:mutedColor,children:[\"Season \",league.season]})]}),/*#__PURE__*/_jsxs(HStack,{spacing:2,mt:\"auto\",children:[league.liveMatches&&league.liveMatches>0&&/*#__PURE__*/_jsxs(Badge,{colorScheme:\"red\",variant:\"subtle\",fontSize:\"xs\",children:[league.liveMatches,\" live\"]}),league.upcomingMatches&&league.upcomingMatches>0&&/*#__PURE__*/_jsxs(Badge,{colorScheme:\"blue\",variant:\"subtle\",fontSize:\"xs\",children:[league.upcomingMatches,\" upcoming\"]})]})]})]});};// Loading skeleton component\nconst LeagueCardSkeleton=_ref3=>{let{view}=_ref3;if(view==='list'){return/*#__PURE__*/_jsx(Box,{p:4,borderRadius:\"md\",border:\"1px solid\",borderColor:\"gray.200\",children:/*#__PURE__*/_jsxs(Flex,{align:\"center\",children:[/*#__PURE__*/_jsx(Skeleton,{boxSize:\"40px\",borderRadius:\"md\"}),/*#__PURE__*/_jsxs(Box,{ml:3,flex:\"1\",children:[/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"60%\",mb:2}),/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"40%\"})]}),/*#__PURE__*/_jsxs(HStack,{spacing:2,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"24px\",width:\"60px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"24px\",width:\"80px\"})]})]})});}return/*#__PURE__*/_jsx(Box,{p:5,borderRadius:\"lg\",border:\"1px solid\",borderColor:\"gray.200\",minH:\"200px\",children:/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"center\",children:[/*#__PURE__*/_jsx(Skeleton,{boxSize:\"64px\",borderRadius:\"md\"}),/*#__PURE__*/_jsxs(VStack,{spacing:2,textAlign:\"center\",flex:\"1\",children:[/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"80%\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"16px\",width:\"60%\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"14px\",width:\"40%\"})]}),/*#__PURE__*/_jsxs(HStack,{spacing:2,children:[/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"50px\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"70px\"})]})]})});};const LeaguesTab=_ref4=>{let{onLeagueSelect,showFilters=true,defaultView='grid',realTimeUpdates=true}=_ref4;// State management\nconst[leagues,setLeagues]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[view,setView]=useState(defaultView);const[filters,setFilters]=useState({status:'all',search:'',country:'',hasMatches:false});const[realTimeEnabled,setRealTimeEnabled]=useState(realTimeUpdates);// Theme colors\nconst bg=useColorModeValue('gray.50','gray.900');const cardBg=useColorModeValue('white','gray.800');const borderColor=useColorModeValue('gray.200','gray.700');const textColor=useColorModeValue('gray.800','white');const mutedColor=useColorModeValue('gray.600','gray.400');// Load leagues with real API integration\nuseEffect(()=>{const loadLeagues=async()=>{setLoading(true);try{console.log('[LeaguesTab] Loading enhanced leagues with filters:',filters);// Fetch enhanced leagues with current filters\nconst enhancedLeagues=await fetchEnhancedLeagues(filters);console.log(`[LeaguesTab] Successfully loaded ${enhancedLeagues.length} leagues:`,enhancedLeagues.slice(0,3));setLeagues(enhancedLeagues);setError(null);// Show some sample leagues in console for debugging\nif(enhancedLeagues.length>0){console.log('[LeaguesTab] Sample leagues:',enhancedLeagues.slice(0,5).map(l=>({name:l.name,country:l.country,status:l.status,liveMatches:l.liveMatches,upcomingMatches:l.upcomingMatches})));}}catch(err){const errorMessage=err instanceof Error?err.message:'Failed to load leagues';setError(errorMessage);console.error('[LeaguesTab] Error loading leagues:',err);}finally{setLoading(false);}};loadLeagues();},[filters]);// Real-time updates for live leagues\nuseEffect(()=>{if(!realTimeEnabled)return;const interval=setInterval(async()=>{try{console.log('[LeaguesTab] Real-time update...');const updatedLeagues=await fetchEnhancedLeagues(filters);// Only update if there are actual changes to avoid unnecessary re-renders\nconst hasChanges=updatedLeagues.some((newLeague,index)=>{const oldLeague=leagues[index];return!oldLeague||newLeague.liveMatches!==oldLeague.liveMatches||newLeague.upcomingMatches!==oldLeague.upcomingMatches||newLeague.status!==oldLeague.status;});if(hasChanges){console.log('[LeaguesTab] Real-time changes detected, updating...');setLeagues(updatedLeagues);}}catch(err){console.error('[LeaguesTab] Real-time update failed:',err);}},30000);// Update every 30 seconds\nreturn()=>clearInterval(interval);},[realTimeEnabled,filters,leagues]);// Filtered leagues\nconst filteredLeagues=useMemo(()=>{return leagues.filter(league=>{if(filters.search&&!league.name.toLowerCase().includes(filters.search.toLowerCase())&&!league.country.toLowerCase().includes(filters.search.toLowerCase())){return false;}if(filters.country&&league.country!==filters.country){return false;}if(filters.status!=='all'&&league.status!==filters.status){return false;}if(filters.hasMatches&&!league.liveMatches&&!league.upcomingMatches){return false;}return true;});},[leagues,filters]);return/*#__PURE__*/_jsx(Box,{bg:bg,minH:\"100vh\",p:6,children:/*#__PURE__*/_jsx(Container,{maxW:\"7xl\",children:/*#__PURE__*/_jsxs(VStack,{spacing:6,align:\"stretch\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Heading,{size:\"lg\",color:textColor,mb:2,children:\"Football Leagues\"}),/*#__PURE__*/_jsx(Text,{color:mutedColor,children:\"Discover live and upcoming football leagues from around the world\"})]}),showFilters&&/*#__PURE__*/_jsx(Box,{p:4,bg:cardBg,borderRadius:\"lg\",border:\"1px solid\",borderColor:borderColor,children:/*#__PURE__*/_jsxs(Flex,{direction:{base:'column',md:'row'},gap:4,align:\"center\",children:[/*#__PURE__*/_jsxs(InputGroup,{flex:\"1\",maxW:\"300px\",children:[/*#__PURE__*/_jsx(InputLeftElement,{children:/*#__PURE__*/_jsx(Icon,{as:FiSearch,color:mutedColor})}),/*#__PURE__*/_jsx(Input,{placeholder:\"Search leagues...\",value:filters.search,onChange:e=>setFilters(prev=>({...prev,search:e.target.value}))})]}),/*#__PURE__*/_jsxs(Select,{value:filters.status,onChange:e=>setFilters(prev=>({...prev,status:e.target.value})),maxW:\"150px\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"live\",children:\"Live\"}),/*#__PURE__*/_jsx(\"option\",{value:\"upcoming\",children:\"Upcoming\"}),/*#__PURE__*/_jsx(\"option\",{value:\"finished\",children:\"Finished\"})]}),/*#__PURE__*/_jsxs(ButtonGroup,{isAttached:true,children:[/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(FiGrid,{}),variant:view==='grid'?'solid':'outline',onClick:()=>setView('grid'),size:\"sm\",children:\"Grid\"}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(FiList,{}),variant:view==='list'?'solid':'outline',onClick:()=>setView('list'),size:\"sm\",children:\"List\"})]}),/*#__PURE__*/_jsxs(FormControl,{display:\"flex\",alignItems:\"center\",w:\"auto\",children:[/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"realtime\",mb:\"0\",fontSize:\"sm\",children:\"Real-time\"}),/*#__PURE__*/_jsx(Switch,{id:\"realtime\",isChecked:realTimeEnabled,onChange:e=>setRealTimeEnabled(e.target.checked)})]})]})}),/*#__PURE__*/_jsxs(Flex,{justify:\"space-between\",align:\"center\",children:[/*#__PURE__*/_jsx(Text,{color:mutedColor,fontSize:\"sm\",children:loading?'Loading...':`${filteredLeagues.length} leagues found`}),/*#__PURE__*/_jsx(Button,{leftIcon:/*#__PURE__*/_jsx(FiRefreshCw,{}),variant:\"ghost\",size:\"sm\",onClick:()=>window.location.reload(),children:\"Refresh\"})]}),loading?/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:view==='grid'?3:1,lg:view==='grid'?4:1},spacing:4,children:Array.from({length:8}).map((_,i)=>/*#__PURE__*/_jsx(LeagueCardSkeleton,{view:view},i))}):error?/*#__PURE__*/_jsx(Center,{py:10,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,children:[/*#__PURE__*/_jsx(Text,{color:\"red.500\",children:error}),/*#__PURE__*/_jsx(Button,{onClick:()=>window.location.reload(),children:\"Try Again\"})]})}):filteredLeagues.length===0?/*#__PURE__*/_jsx(Center,{py:10,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,children:[/*#__PURE__*/_jsx(Icon,{as:FiGlobe,boxSize:10,color:mutedColor}),/*#__PURE__*/_jsx(Text,{color:mutedColor,children:\"No leagues found matching your criteria\"})]})}):/*#__PURE__*/_jsx(SimpleGrid,{columns:{base:1,md:view==='grid'?3:1,lg:view==='grid'?4:1},spacing:4,children:filteredLeagues.map(league=>/*#__PURE__*/_jsx(LeagueCard,{league:league,onClick:onLeagueSelect,view:view},league.id))})]})})});};export default LeaguesTab;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}